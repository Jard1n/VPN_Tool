#!name = ğŸ“º BiliBili: ğŸ”€ Redirect
#!desc = å“”å“©å“”å“©ï¼šé‡å®šå‘\nä¸­å›½ç«™CDNè‡ªå®šä¹‰
#!openUrl = http://boxjs.com/#/app/BiliBili.Redirect
#!author = VirgilClyne[https://github.com/VirgilClyne]
#!homepage = https://Redirect.BiliUniverse.io
#!icon = https://github.com/BiliUniverse/Redirect/raw/main/src/assets/icon_rounded.png
#!category = ğŸª BiliUniverse
#!arguments = Host.OverseaVideo:"upos-sz-mirrorali.bilivideo.com",Host.BStar:"upos-sz-mirrorali.bilivideo.com",Host.PCDN:"upos-sz-mirrorali.bilivideo.com",Host.MCDN:"proxy-tf-all-ws.bilivideo.com",LogLevel:"WARN"
#!arguments-desc = Host.OverseaVideo: [ä¸»æœºå] é‡å®šå‘ OverseaVideo CDN (æ¸¯æ¾³å°)\n    â”œ upos-sz-mirrorali.bilivideo.com: é˜¿é‡Œäº‘ CDN\n    â”œ upos-sz-mirrorcos.bilivideo.com: è…¾è®¯äº‘ CDN\n    â”œ upos-sz-mirrorhw.bilivideo.com: åä¸ºäº‘ CDNï¼Œèåˆ CDN\n    â”œ upos-sz-mirroraliov.bilivideo.com: é˜¿é‡Œäº‘ CDNï¼Œæµ·å¤–\n    â”œ upos-sz-mirrorcosov.bilivideo.com: è…¾è®¯äº‘ CDNï¼Œæµ·å¤–\n    â”” upos-sz-mirrorhwov.bilivideo.com: åä¸ºäº‘ CDNï¼Œæµ·å¤–\nè¯·é€‰æ‹© OverseaVideo è¦é‡å®šå‘çš„ä¸»æœºåã€‚\n\nHost.BStar: [ä¸»æœºå] é‡å®šå‘ BStar CDN (å›½é™…ç‰ˆ)\n    â”œ upos-sz-mirrorali.bilivideo.com: é˜¿é‡Œäº‘ CDN\n    â”œ upos-sz-mirrorcos.bilivideo.com: è…¾è®¯äº‘ CDN\n    â”œ upos-sz-mirrorhw.bilivideo.com: åä¸ºäº‘ CDNï¼Œèåˆ CDN\n    â”œ upos-sz-mirroraliov.bilivideo.com: é˜¿é‡Œäº‘ CDNï¼Œæµ·å¤–\n    â”œ upos-sz-mirrorcosov.bilivideo.com: è…¾è®¯äº‘ CDNï¼Œæµ·å¤–\n    â”” upos-sz-mirrorhwov.bilivideo.com: åä¸ºäº‘ CDNï¼Œæµ·å¤–\nè¯·é€‰æ‹© BStar è¦é‡å®šå‘çš„ä¸»æœºåã€‚\n\nHost.PCDN: [ä¸»æœºå] é‡å®šå‘ PCDN ä¸»æœºå (ä¸­å›½å¤§é™†)\n    â”œ upos-sz-mirrorali.bilivideo.com: é˜¿é‡Œäº‘ CDN\n    â”œ upos-sz-mirrorcos.bilivideo.com: è…¾è®¯äº‘ CDN\n    â”œ upos-sz-mirrorhw.bilivideo.com: åä¸ºäº‘ CDNï¼Œèåˆ CDN\n    â”œ upos-sz-mirroraliov.bilivideo.com: é˜¿é‡Œäº‘ CDNï¼Œæµ·å¤–\n    â”œ upos-sz-mirrorcosov.bilivideo.com: è…¾è®¯äº‘ CDNï¼Œæµ·å¤–\n    â”” upos-sz-mirrorhwov.bilivideo.com: åä¸ºäº‘ CDNï¼Œæµ·å¤–\nè¯·é€‰æ‹© PCDN è¦é‡å®šå‘çš„ä¸»æœºåã€‚\n\nHost.MCDN: [ä¸»æœºå] é‡å®šå‘ MCDN ä¸»æœºå (ä¸­å›½å¤§é™†)\n    â”” proxy-tf-all-ws.bilivideo.com: proxy-tf-all-ws.bilivideo.com\nè¯·é€‰æ‹© MCDN è¦é‡å®šå‘çš„ä¸»æœºåã€‚\n\nLogLevel: [è°ƒè¯•] æ—¥å¿—ç­‰çº§\n    â”œ OFF: å…³é—­\n    â”œ ERROR: âŒ é”™è¯¯\n    â”œ WARN: âš ï¸ è­¦å‘Š\n    â”œ INFO: â„¹ï¸ ä¿¡æ¯\n    â”œ DEBUG: ğŸ…±ï¸ è°ƒè¯•\n    â”” ALL: å…¨éƒ¨\né€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚\n

[General]
# > TCP Force HTTP Hosts
# è®© Surge æŠŠ TCP è¿æ¥å½“ä½œ HTTP è¯·æ±‚æ¥å¤„ç†ã€‚Surge HTTP å¼•æ“å°†å¤„ç†è¿™äº›è¯·æ±‚ï¼Œæ‰€æœ‰çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚æ•è·ã€é‡å†™å’Œè„šæœ¬ç­‰éƒ½å¯ä»¥ä½¿ç”¨ã€‚
force-http-engine-hosts = %APPEND% *:4480, *:4483, *:8000, *:8082, *:9102

[Script]
ğŸ“º BiliBili.Redirect.CDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/.+\.bilivideo\.com\/upgcxcode\/, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/Redirect.request.bundle.js, argument=Host.OverseaVideo="{{{Host.OverseaVideo}}}"&Host.BStar="{{{Host.BStar}}}"&Host.PCDN="{{{Host.PCDN}}}"&Host.MCDN="{{{Host.MCDN}}}"&LogLevel="{{{LogLevel}}}"
ğŸ“º BiliBili.Redirect.MCDN.v1.resource.m4s = type=http-request, pattern=^https?:\/\/[adbcefxy0-9]+\.mcdn\.bilivideo\.cn(:(8000|8082))?\/v1\/resource\/, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/Redirect.request.bundle.js, argument=Host.OverseaVideo="{{{Host.OverseaVideo}}}"&Host.BStar="{{{Host.BStar}}}"&Host.PCDN="{{{Host.PCDN}}}"&Host.MCDN="{{{Host.MCDN}}}"&LogLevel="{{{LogLevel}}}"
ğŸ“º BiliBili.Redirect.MCDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/[adbcefxy0-9]+\.mcdn\.bilivideo\.cn(:(4483|9102))?\/upgcxcode\/, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/Redirect.request.bundle.js, argument=Host.OverseaVideo="{{{Host.OverseaVideo}}}"&Host.BStar="{{{Host.BStar}}}"&Host.PCDN="{{{Host.PCDN}}}"&Host.MCDN="{{{Host.MCDN}}}"&LogLevel="{{{LogLevel}}}"
ğŸ“º BiliBili.Redirect.PCDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/(.+):4480\/upgcxcode\/, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/Redirect.request.bundle.js, argument=Host.OverseaVideo="{{{Host.OverseaVideo}}}"&Host.BStar="{{{Host.BStar}}}"&Host.PCDN="{{{Host.PCDN}}}"&Host.MCDN="{{{Host.MCDN}}}"&LogLevel="{{{LogLevel}}}"
ğŸ“º BiliBili.Redirect.Akamaized.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/upos-(hz|bstar1)-mirrorakam\.akamaized\.net/upgcxcode\/, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/Redirect.request.bundle.js, argument=Host.OverseaVideo="{{{Host.OverseaVideo}}}"&Host.BStar="{{{Host.BStar}}}"&Host.PCDN="{{{Host.PCDN}}}"&Host.MCDN="{{{Host.MCDN}}}"&LogLevel="{{{LogLevel}}}"

[MITM]
hostname = %APPEND% *.mcdn.bilivideo.cn, upos-sz-mirror*bstar1.bilivideo.com, upos-*-mirrorakam.akamaized.net
