#!name = ï£¿ iRingo: ğŸŒ¤ ï£¿WeatherKit
#!desc = iOS 18 & macOS 15 & watchOS 11\n1.è§£é”å…¨éƒ¨å¤©æ°”åŠŸèƒ½\n2.æ›¿æ¢ç©ºæ°”è´¨é‡æ•°æ®\n3.æ·»åŠ ä¸‹ä¸€å°æ—¶é™æ°´æ•°æ®\n4.æ·»åŠ å¤©æ°”æ•°æ®
#!openUrl = http://boxjs.com/#/app/iRingo.WeatherKit
#!author = VirgilClyne[https://github.com/VirgilClyne],WordlessEcho[https://github.com/WordlessEcho],001[https://github.com/001ProMax]
#!homepage = https://NSRingo.github.io/guide/Weather/weather-kit
#!icon = https://developer.apple.com/assets/elements/icons/weatherkit/weatherkit-128x128.png
#!category = ï£¿ iRingo
#!arguments = Weather.Replace:"CN",Weather.Provider:"ColorfulClouds",NextHour.Fill:"CN|HK|MO|TW|IT|LT|MT|FR|SK|NO|BY|IS|CZ|SI|DE|ES|UA|DK|PL|FI|SE|HR|RU|RO|PT|EE|RS|AT|GR|HU|FJ|GU|MH|NC|TR|BH|SA|ID|IR|SG|OM|PH|IN|KH|CY|MY|VN|KW|TH|KR|KP|CA|BS|KY|MX|PA|MQ|CU|BM|PR|CW|GP|NI|BR|GF|CO|GY|PY|AR",NextHour.Provider:"ColorfulClouds",AirQuality.Current.Fill:"CN|HK|MO",AirQuality.Current.Pollutants.Provider:"ColorfulClouds",AirQuality.Current.Index.Replace:"HJ6332012",AirQuality.Current.Index.Provider:"Calculate",AirQuality.Current.Index.ForceCNPrimaryPollutants:true,AirQuality.Comparison.Fill:"CN|HK|MO",AirQuality.Comparison.Yesterday.PollutantsProvider:"QWeather",AirQuality.Comparison.Yesterday.IndexProvider:"ColorfulCloudsUS",AirQuality.Calculate.Algorithm:"UBA",AirQuality.Calculate.AllowOverRange:true,API.ColorfulClouds.Token:"",API.QWeather.Host:"devapi.qweather.com",API.QWeather.Token:"",API.WAQI.Token:"",Storage:"$argument",LogLevel:"WARN"
#!arguments-desc = Weather.Replace: [å¤©æ°”] æ›¿æ¢åœ°åŒº\næ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæ›¿æ¢æŒ‡å®šåœ°åŒºçš„å¤©æ°”ã€‚\n\nWeather.Provider: [å¤©æ°”] æ•°æ®æº\n    â”œ ColorfulClouds: å½©äº‘å¤©æ°”\n    â”” QWeather: å’Œé£å¤©æ°”\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºæ›¿æ¢å¤©æ°”æ•°æ®ã€‚\n\nNextHour.Fill: [æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦] å¡«è¡¥åœ°åŒº\næ­£åˆ™è¡¨è¾¾å¼ï¼Œåªå¡«è¡¥æŒ‡å®šåœ°åŒºçš„æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦ã€‚\n\nNextHour.Provider: [æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦] æ•°æ®æº\n    â”œ ColorfulClouds: å½©äº‘å¤©æ°”\n    â”” QWeather: å’Œé£å¤©æ°”\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºå¡«å……æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦çš„æ•°æ®ã€‚\n\nAirQuality.Current.Fill: [ç©ºæ°”è´¨é‡ - ä»Šæ—¥] å¡«è¡¥åœ°åŒº\næ­£åˆ™è¡¨è¾¾å¼ï¼Œåªå¡«è¡¥æŒ‡å®šåœ°åŒºçš„ä»Šæ—¥ç©ºæ°”è´¨é‡æ•°æ®ã€‚\n\nAirQuality.Current.Pollutants.Provider: [ä»Šæ—¥æ±¡æŸ“ç‰©] æ•°æ®æº\n    â”œ ColorfulClouds: å½©äº‘å¤©æ°”\n    â”” QWeather: å’Œé£å¤©æ°”\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºå¡«è¡¥æ±¡æŸ“ç‰©æ•°æ®ã€‚\n\nAirQuality.Current.Index.Replace: [ä»Šæ—¥ç©ºæ°”æŒ‡æ•°] æ›¿æ¢ç›®æ ‡\n    â”œ HJ6332012: ä¸­å›½AQIï¼ˆHJ6332012ï¼‰\n    â”œ IE.AQIH: çˆ±å°”å…°AQIHï¼ˆIE.AQIHï¼‰\n    â”œ AT.AQI: å¥¥åœ°åˆ©AQIï¼ˆAT.AQIï¼‰\n    â”œ BE.BelAQI: æ¯”åˆ©æ—¶BelAQIï¼ˆBE.BelAQIï¼‰\n    â”œ UBA: å¾·å›½LQIï¼ˆUBAï¼‰\n    â”œ FR.ATMO: æ³•å›½IQAï¼ˆFR.ATMOï¼‰\n    â”œ KR.CAI: éŸ©å›½CAIï¼ˆKR.CAIï¼‰\n    â”œ CA.AQHI: åŠ æ‹¿å¤§AQHIï¼ˆCA.AQHIï¼‰\n    â”œ CZ.AQI: æ·å…‹AQIï¼ˆCZ.AQIï¼‰\n    â”œ NL.LKI: è·å…°LKIï¼ˆNL.LKIï¼‰\n    â”œ EPA_NowCast: ç¾å›½AQIï¼ˆEPA_NowCastï¼‰\n    â”œ ICARS: å¢¨è¥¿å“¥ICARSï¼ˆICARSï¼‰\n    â”œ EU.EAQI: æ¬§ç›ŸEAQIï¼ˆEU.EAQIï¼‰\n    â”œ CH.KBI: ç‘å£«KBIï¼ˆCH.KBIï¼‰\n    â”œ ES.MITECO: è¥¿ç­ç‰™ICAï¼ˆES.MITECOï¼‰\n    â”œ SG.NEA: æ–°åŠ å¡PSIï¼ˆSG.NEAï¼‰\n    â”œ NAQI: å°åº¦NAQIï¼ˆNAQIï¼‰\n    â”” DAQI: è‹±å›½DAQIï¼ˆDAQIï¼‰\næ›¿æ¢æŒ‡å®šæ ‡å‡†çš„ç©ºæ°”è´¨é‡æŒ‡æ•°ã€‚\n\nAirQuality.Current.Index.Provider: [ä»Šæ—¥ç©ºæ°”æŒ‡æ•°] æ•°æ®æº\n    â”œ Calculate: iRingoå†…ç½®ç®—æ³•\n    â”œ ColorfulCloudsUS: å½©äº‘å¤©æ°”ï¼ˆç¾æ ‡ï¼Œ18å¹´9æœˆç‰ˆï¼‰\n    â”œ ColorfulCloudsCN: å½©äº‘å¤©æ°”ï¼ˆå›½æ ‡ï¼‰\n    â”œ QWeather: å’Œé£å¤©æ°”ï¼ˆå›½æ ‡ï¼‰\n    â”” WAQI: WAQIï¼ˆç¾æ ‡InstantCastï¼Œ18å¹´9æœˆç‰ˆï¼‰\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºå¡«è¡¥å’Œæ›¿æ¢ç©ºæ°”è´¨é‡æŒ‡æ•°ã€‚\n\nAirQuality.Current.Index.ForceCNPrimaryPollutants: [ä»Šæ—¥ç©ºæ°”æŒ‡æ•°] å¼ºåˆ¶ä¸»è¦æ±¡æŸ“ç‰©\nå¿½ç•¥å›½æ ‡ï¼ˆHJ 633â€”2012ï¼‰çš„AQI > 50è§„å®šï¼Œå§‹ç»ˆå°†IAQIæœ€å¤§çš„ç©ºæ°”æ±¡æŸ“ç‰©ä½œä¸ºä¸»è¦æ±¡æŸ“ç‰©ã€‚\n\nAirQuality.Comparison.Fill: [ç©ºæ°”è´¨é‡ - å¯¹æ¯”æ˜¨æ—¥] å¡«è¡¥åœ°åŒº\næ­£åˆ™è¡¨è¾¾å¼ï¼Œåªå¡«è¡¥æŒ‡å®šåœ°åŒºçš„å¯¹æ¯”æ˜¨æ—¥æ•°æ®ã€‚\n\nAirQuality.Comparison.Yesterday.PollutantsProvider: [æ˜¨æ—¥æ±¡æŸ“ç‰©] æ•°æ®æº\n    â”” QWeather: å’Œé£å¤©æ°”\nä¸ºiRingoå†…ç½®ç®—æ³•æä¾›æ±¡æŸ“ç‰©æ•°æ®ï¼Œè®¡ç®—å‡ºæ˜¨æ—¥çš„ç©ºæ°”è´¨é‡æŒ‡æ•°ã€‚\n\nAirQuality.Comparison.Yesterday.IndexProvider: [æ˜¨æ—¥ç©ºæ°”æŒ‡æ•°] æ•°æ®æº\n    â”œ Calculate: iRingoå†…ç½®ç®—æ³•\n    â”œ ColorfulCloudsUS: å½©äº‘å¤©æ°”ï¼ˆç¾æ ‡ï¼Œ18å¹´9æœˆç‰ˆï¼‰\n    â”œ ColorfulCloudsCN: å½©äº‘å¤©æ°”ï¼ˆå›½æ ‡ï¼Œ12å¹´2æœˆç‰ˆï¼‰\n    â”” QWeather: å’Œé£å¤©æ°”ï¼ˆå›½æ ‡ï¼Œ12å¹´2æœˆç‰ˆï¼‰\nç”¨æ¥å’Œä»Šæ—¥ç©ºæ°”è´¨é‡æŒ‡æ•°å¯¹æ¯”çš„æ•°æ®ã€‚\n\nAirQuality.Calculate.Algorithm: [iRingoå†…ç½®ç®—æ³•] ç®—æ³•\n    â”œ UBA: å¾·å›½LQIï¼ˆFB001846ï¼‰\n    â”œ EU_EAQI: æ¬§ç›ŸEAQIï¼ˆETC HE Report 2024/17ï¼‰\n    â”œ WAQI_InstantCast_US: ç¾æ ‡InstantCastï¼ˆEPA-454/B-24-002ï¼‰\n    â”œ WAQI_InstantCast_CN: å›½æ ‡InstantCastï¼ˆHJ 633â€”2012ï¼‰\n    â”” WAQI_InstantCast_CN_25_DRAFT: å›½æ ‡InstantCastï¼ˆHJ 633 2025å¹´è‰æ¡ˆï¼‰\nä½¿ç”¨å†…ç½®ç®—æ³•ï¼Œé€šè¿‡æ±¡æŸ“ç‰©æ•°æ®æœ¬åœ°è®¡ç®—ç©ºæ°”æŒ‡æ•°ã€‚InstantCastæºè‡ªäºWAQIï¼Œç¾æ ‡ç‰ˆæœ¬ä½¿ç”¨äº†WAQIçš„è‡­æ°§æ ‡å‡†ã€‚\n\nAirQuality.Calculate.AllowOverRange: [iRingoå†…ç½®ç®—æ³•] å…è®¸æŒ‡æ•°è¶…æ ‡\nå…è®¸ç¾æ ‡å’Œå›½æ ‡çš„æŒ‡æ•°è¶…è¿‡500ã€‚è¶…è¿‡500æ—¶ï¼ŒæŒ‡ç¤ºé¢œè‰²çš„å°åœ†ç‚¹ä¼šæ¶ˆå¤±ã€‚\n\nAPI.ColorfulClouds.Token: [API] å½©äº‘å¤©æ°”ä»¤ç‰Œ\nå½©äº‘å¤©æ°” API ä»¤ç‰Œ\n\nAPI.QWeather.Host: [API] å’Œé£å¤©æ°”ä¸»æœº\nå’Œé£å¤©æ°” API ä½¿ç”¨çš„ä¸»æœºå\n\nAPI.QWeather.Token: [API] å’Œé£å¤©æ°”ä»¤ç‰Œ\nå’Œé£å¤©æ°” API ä»¤ç‰Œ\n\nAPI.WAQI.Token: [API] WAQI ä»¤ç‰Œ\nWAQI API ä»¤ç‰Œï¼Œå¡«å†™æ­¤å­—æ®µå°†è‡ªåŠ¨ä½¿ç”¨WAQIé«˜çº§API\n\nStorage: [å‚¨å­˜] é…ç½®ç±»å‹\n    â”œ $argument: ä¼˜å…ˆä½¿ç”¨æ¥è‡ª $argument çš„é…ç½®ï¼Œ$argument ä¸åŒ…å«çš„è®¾ç½®é¡¹ç”± PersistentStore(BoxJs) æä¾›\n    â”œ PersistentStore: åªä½¿ç”¨ PersistentStore(BoxJs) æä¾›çš„é…ç½®\n    â”” database: åªä½¿ç”¨ç”±ä½œè€…çš„ database.mjs æ–‡ä»¶æä¾›çš„é»˜è®¤é…ç½®ï¼Œå…¶ä»–ä»»ä½•è‡ªå®šä¹‰é…ç½®ä¸å†èµ·ä½œç”¨\né€‰æ‹©è¦ä½¿ç”¨çš„é…ç½®ç±»å‹ã€‚æœªè®¾ç½®æ­¤é€‰é¡¹æˆ–ä¸é€šè¿‡æ­¤é€‰é¡¹çš„æ—§ç‰ˆæœ¬çš„é…ç½®é¡ºåºä¾æ—§æ˜¯ PersistentStore(BoxJs) > $argument > databaseã€‚\n\nLogLevel: [è°ƒè¯•] æ—¥å¿—ç­‰çº§\n    â”œ OFF: å…³é—­\n    â”œ ERROR: âŒ é”™è¯¯\n    â”œ WARN: âš ï¸ è­¦å‘Š\n    â”œ INFO: â„¹ï¸ ä¿¡æ¯\n    â”œ DEBUG: ğŸ…±ï¸ è°ƒè¯•\n    â”” ALL: å…¨éƒ¨\né€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚\n

[Rule]
DOMAIN,weather-analytics-events.apple.com,REJECT-DROP
DOMAIN-SUFFIX,tthr.apple.com,REJECT-DROP,extended-matching
DOMAIN,tether.edge.apple,REJECT-DROP,extended-matching
AND,((IP-ASN,714,no-resolve),(PROTOCOL,QUIC)),REJECT-DROP

[Script]
ğŸŒ¤ ï£¿WeatherKit.api.v1.availability.response = type=http-response, pattern=^https?:\/\/weatherkit\.apple\.com\/api\/v1\/availability\/, requires-body=1, engine=webview, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/WeatherKit.response.bundle.js, argument=Weather.Replace="{{{Weather.Replace}}}"&Weather.Provider="{{{Weather.Provider}}}"&NextHour.Fill="{{{NextHour.Fill}}}"&NextHour.Provider="{{{NextHour.Provider}}}"&AirQuality.Current.Fill="{{{AirQuality.Current.Fill}}}"&AirQuality.Current.Pollutants.Provider="{{{AirQuality.Current.Pollutants.Provider}}}"&AirQuality.Current.Index.Replace="{{{AirQuality.Current.Index.Replace}}}"&AirQuality.Current.Index.Provider="{{{AirQuality.Current.Index.Provider}}}"&AirQuality.Current.Index.ForceCNPrimaryPollutants="{{{AirQuality.Current.Index.ForceCNPrimaryPollutants}}}"&AirQuality.Comparison.Fill="{{{AirQuality.Comparison.Fill}}}"&AirQuality.Comparison.Yesterday.PollutantsProvider="{{{AirQuality.Comparison.Yesterday.PollutantsProvider}}}"&AirQuality.Comparison.Yesterday.IndexProvider="{{{AirQuality.Comparison.Yesterday.IndexProvider}}}"&AirQuality.Calculate.Algorithm="{{{AirQuality.Calculate.Algorithm}}}"&AirQuality.Calculate.AllowOverRange="{{{AirQuality.Calculate.AllowOverRange}}}"&API.ColorfulClouds.Token="{{{API.ColorfulClouds.Token}}}"&API.QWeather.Host="{{{API.QWeather.Host}}}"&API.QWeather.Token="{{{API.QWeather.Token}}}"&API.WAQI.Token="{{{API.WAQI.Token}}}"&Storage="{{{Storage}}}"&LogLevel="{{{LogLevel}}}"
ğŸŒ¤ ï£¿WeatherKit.api.v2.weather.request = type=http-request, pattern=^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/, engine=webview, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/WeatherKit.request.bundle.js, argument=Weather.Replace="{{{Weather.Replace}}}"&Weather.Provider="{{{Weather.Provider}}}"&NextHour.Fill="{{{NextHour.Fill}}}"&NextHour.Provider="{{{NextHour.Provider}}}"&AirQuality.Current.Fill="{{{AirQuality.Current.Fill}}}"&AirQuality.Current.Pollutants.Provider="{{{AirQuality.Current.Pollutants.Provider}}}"&AirQuality.Current.Index.Replace="{{{AirQuality.Current.Index.Replace}}}"&AirQuality.Current.Index.Provider="{{{AirQuality.Current.Index.Provider}}}"&AirQuality.Current.Index.ForceCNPrimaryPollutants="{{{AirQuality.Current.Index.ForceCNPrimaryPollutants}}}"&AirQuality.Comparison.Fill="{{{AirQuality.Comparison.Fill}}}"&AirQuality.Comparison.Yesterday.PollutantsProvider="{{{AirQuality.Comparison.Yesterday.PollutantsProvider}}}"&AirQuality.Comparison.Yesterday.IndexProvider="{{{AirQuality.Comparison.Yesterday.IndexProvider}}}"&AirQuality.Calculate.Algorithm="{{{AirQuality.Calculate.Algorithm}}}"&AirQuality.Calculate.AllowOverRange="{{{AirQuality.Calculate.AllowOverRange}}}"&API.ColorfulClouds.Token="{{{API.ColorfulClouds.Token}}}"&API.QWeather.Host="{{{API.QWeather.Host}}}"&API.QWeather.Token="{{{API.QWeather.Token}}}"&API.WAQI.Token="{{{API.WAQI.Token}}}"&Storage="{{{Storage}}}"&LogLevel="{{{LogLevel}}}"
ğŸŒ¤ ï£¿WeatherKit.api.v2.weather.response = type=http-response, pattern=^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/, requires-body=1, binary-body-mode=1, engine=webview, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/WeatherKit.response.bundle.js, argument=Weather.Replace="{{{Weather.Replace}}}"&Weather.Provider="{{{Weather.Provider}}}"&NextHour.Fill="{{{NextHour.Fill}}}"&NextHour.Provider="{{{NextHour.Provider}}}"&AirQuality.Current.Fill="{{{AirQuality.Current.Fill}}}"&AirQuality.Current.Pollutants.Provider="{{{AirQuality.Current.Pollutants.Provider}}}"&AirQuality.Current.Index.Replace="{{{AirQuality.Current.Index.Replace}}}"&AirQuality.Current.Index.Provider="{{{AirQuality.Current.Index.Provider}}}"&AirQuality.Current.Index.ForceCNPrimaryPollutants="{{{AirQuality.Current.Index.ForceCNPrimaryPollutants}}}"&AirQuality.Comparison.Fill="{{{AirQuality.Comparison.Fill}}}"&AirQuality.Comparison.Yesterday.PollutantsProvider="{{{AirQuality.Comparison.Yesterday.PollutantsProvider}}}"&AirQuality.Comparison.Yesterday.IndexProvider="{{{AirQuality.Comparison.Yesterday.IndexProvider}}}"&AirQuality.Calculate.Algorithm="{{{AirQuality.Calculate.Algorithm}}}"&AirQuality.Calculate.AllowOverRange="{{{AirQuality.Calculate.AllowOverRange}}}"&API.ColorfulClouds.Token="{{{API.ColorfulClouds.Token}}}"&API.QWeather.Host="{{{API.QWeather.Host}}}"&API.QWeather.Token="{{{API.QWeather.Token}}}"&API.WAQI.Token="{{{API.WAQI.Token}}}"&Storage="{{{Storage}}}"&LogLevel="{{{LogLevel}}}"

[MITM]
hostname = %APPEND% weatherkit.apple.com
