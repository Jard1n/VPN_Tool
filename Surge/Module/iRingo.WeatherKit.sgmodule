#!name = ï£¿ iRingo: ğŸŒ¤ ï£¿WeatherKit
#!desc = iOS 18 & macOS 15 & watchOS 11\n1.è§£é”å…¨éƒ¨å¤©æ°”åŠŸèƒ½\n2.æ›¿æ¢ç©ºæ°”è´¨é‡æ•°æ®\n3.æ·»åŠ ä¸‹ä¸€å°æ—¶é™æ°´æ•°æ®\n4.æ·»åŠ å¤©æ°”æ•°æ®
#!openUrl = http://boxjs.com/#/app/iRingo.WeatherKit
#!author = VirgilClyne[https://github.com/VirgilClyne],WordlessEcho[https://github.com/WordlessEcho],001[https://github.com/001ProMax]
#!homepage = https://NSRingo.github.io/guide/Weather/weather-kit
#!icon = https://developer.apple.com/assets/elements/icons/weatherkit/weatherkit-128x128.png
#!category = ï£¿ iRingo
#!arguments = Weather.Provider:"ColorfulClouds",NextHour.Provider:"ColorfulClouds",AirQuality.Calculate.Algorithm:"EU_EAQI",API.ColorfulClouds.Token:"",API.QWeather.Host:"devapi.qweather.com",API.QWeather.Token:"",API.WAQI.Token:"",Storage:"Argument",LogLevel:"WARN"
#!arguments-desc = Weather.Provider: [å¤©æ°”] æ•°æ®æº\n    â”œ WeatherKit: WeatherKitï¼ˆä¸æ›¿æ¢ï¼‰\n    â”œ ColorfulClouds: å½©äº‘å¤©æ°”\n    â”” QWeather: å’Œé£å¤©æ°”\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºæ›¿æ¢å¤©æ°”æ•°æ®ã€‚\n\nNextHour.Provider: [æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦] æ•°æ®æº\n    â”œ WeatherKit: WeatherKitï¼ˆä¸æ·»åŠ ï¼‰\n    â”œ ColorfulClouds: å½©äº‘å¤©æ°”\n    â”” QWeather: å’Œé£å¤©æ°”\nä½¿ç”¨é€‰å®šçš„æ•°æ®æºå¡«å……æœªæ¥ä¸€å°æ—¶é™æ°´å¼ºåº¦çš„æ•°æ®ã€‚\n\nAirQuality.Calculate.Algorithm: [iRingoå†…ç½®ç®—æ³•] ç®—æ³•\n    â”œ None: ä¸è½¬æ¢\n    â”œ UBA: å¾·å›½LQIï¼ˆFB001846ï¼‰\n    â”œ EU_EAQI: æ¬§ç›ŸEAQIï¼ˆETC HE Report 2024/17ï¼‰\n    â”œ WAQI_InstantCast_US: ç¾æ ‡InstantCastï¼ˆEPA-454/B-24-002ï¼‰\n    â”œ WAQI_InstantCast_CN: å›½æ ‡InstantCastï¼ˆHJ 633â€”2012ï¼‰\n    â”” WAQI_InstantCast_CN_25_DRAFT: å›½æ ‡InstantCastï¼ˆHJ 633 2025å¹´è‰æ¡ˆï¼‰\nä½¿ç”¨å†…ç½®ç®—æ³•ï¼Œé€šè¿‡æ±¡æŸ“ç‰©æ•°æ®æœ¬åœ°è®¡ç®—ç©ºæ°”æŒ‡æ•°ã€‚InstantCastæºè‡ªäºWAQIï¼Œç¾æ ‡ç‰ˆæœ¬ä½¿ç”¨äº†WAQIçš„è‡­æ°§æ ‡å‡†ã€‚\n\nAPI.ColorfulClouds.Token: [API] å½©äº‘å¤©æ°”ä»¤ç‰Œ\nå½©äº‘å¤©æ°” API ä»¤ç‰Œ\n\nAPI.QWeather.Host: [API] å’Œé£å¤©æ°”ä¸»æœº\nå’Œé£å¤©æ°” API ä½¿ç”¨çš„ä¸»æœºå\n\nAPI.QWeather.Token: [API] å’Œé£å¤©æ°”ä»¤ç‰Œ\nå’Œé£å¤©æ°” API ä»¤ç‰Œ\n\nAPI.WAQI.Token: [API] WAQI ä»¤ç‰Œ\nWAQI API ä»¤ç‰Œï¼Œå¡«å†™æ­¤å­—æ®µå°†è‡ªåŠ¨ä½¿ç”¨WAQIé«˜çº§API\n\nStorage: [å‚¨å­˜] é…ç½®ç±»å‹\n    â”œ Argument: ä¼˜å…ˆä½¿ç”¨æ’ä»¶é€‰é¡¹ä¸æ¨¡å—å‚æ•°ç­‰ï¼Œç”± $argument ä¼ å…¥çš„é…ç½®ï¼Œ$argument ä¸åŒ…å«çš„è®¾ç½®é¡¹ç”± PersistentStore (BoxJs) æä¾›\n    â”œ PersistentStore: åªä½¿ç”¨æ¥è‡ª BoxJs ç­‰ï¼Œç”± $persistentStore æä¾›çš„é…ç½®\n    â”” database: åªä½¿ç”¨ç”±ä½œè€…çš„ database.mjs æ–‡ä»¶æä¾›çš„é»˜è®¤é…ç½®ï¼Œå…¶ä»–ä»»ä½•è‡ªå®šä¹‰é…ç½®ä¸å†èµ·ä½œç”¨\né€‰æ‹©è¦ä½¿ç”¨çš„é…ç½®ç±»å‹ã€‚æœªè®¾ç½®æ­¤é€‰é¡¹æˆ–ä¸é€šè¿‡æ­¤é€‰é¡¹çš„æ—§ç‰ˆæœ¬çš„é…ç½®é¡ºåºä¾æ—§æ˜¯ $persistentStore (BoxJs) > $argument > databaseã€‚\n\nLogLevel: [è°ƒè¯•] æ—¥å¿—ç­‰çº§\n    â”œ OFF: å…³é—­\n    â”œ ERROR: âŒ é”™è¯¯\n    â”œ WARN: âš ï¸ è­¦å‘Š\n    â”œ INFO: â„¹ï¸ ä¿¡æ¯\n    â”œ DEBUG: ğŸ…±ï¸ è°ƒè¯•\n    â”” ALL: å…¨éƒ¨\né€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚\n

[Rule]
DOMAIN,weather-analytics-events.apple.com,REJECT-DROP
DOMAIN-SUFFIX,tthr.apple.com,REJECT-DROP,extended-matching
DOMAIN,tether.edge.apple,REJECT-DROP,extended-matching
AND,((IP-ASN,714,no-resolve),(PROTOCOL,QUIC)),REJECT-DROP

[Script]
ğŸŒ¤ ï£¿WeatherKit.api.v1.availability.response = type=http-response, pattern=^https?:\/\/weatherkit\.apple\.com\/api\/v1\/availability\/, requires-body=1, engine=webview, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/WeatherKit.response.bundle.js, argument=Weather.Provider="{{{Weather.Provider}}}"&NextHour.Provider="{{{NextHour.Provider}}}"&AirQuality.Calculate.Algorithm="{{{AirQuality.Calculate.Algorithm}}}"&API.ColorfulClouds.Token="{{{API.ColorfulClouds.Token}}}"&API.QWeather.Host="{{{API.QWeather.Host}}}"&API.QWeather.Token="{{{API.QWeather.Token}}}"&API.WAQI.Token="{{{API.WAQI.Token}}}"&Storage="{{{Storage}}}"&LogLevel="{{{LogLevel}}}"
ğŸŒ¤ ï£¿WeatherKit.api.v2.weather.response = type=http-response, pattern=^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/, requires-body=1, binary-body-mode=1, engine=webview, script-path=https://raw.githubusercontent.com/Jard1n/VPN_Tool/main/Scripts/Fries/WeatherKit.response.bundle.js, argument=Weather.Provider="{{{Weather.Provider}}}"&NextHour.Provider="{{{NextHour.Provider}}}"&AirQuality.Calculate.Algorithm="{{{AirQuality.Calculate.Algorithm}}}"&API.ColorfulClouds.Token="{{{API.ColorfulClouds.Token}}}"&API.QWeather.Host="{{{API.QWeather.Host}}}"&API.QWeather.Token="{{{API.QWeather.Token}}}"&API.WAQI.Token="{{{API.WAQI.Token}}}"&Storage="{{{Storage}}}"&LogLevel="{{{LogLevel}}}"

[MITM]
hostname = %APPEND% weatherkit.apple.com
