console.log("\uD83D\uDCFA BiliBili: \uD83D\uDEE1Ô∏è ADBlock"),console.log("request.bundle.js"),console.log("Version: 0.6.21"),console.log("Date: 2025/9/17 19:33:43"),(()=>{var e={21:function(e,t,s){var a;e.exports=a||function(e,t){if("undefined"!=typeof window&&window.crypto&&(a=window.crypto),"undefined"!=typeof self&&self.crypto&&(a=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(a=globalThis.crypto),!a&&"undefined"!=typeof window&&window.msCrypto&&(a=window.msCrypto),!a&&void 0!==s.g&&s.g.crypto&&(a=s.g.crypto),!a)try{a=s(656)}catch(e){}var a,r=function(){if(a){if("function"==typeof a.getRandomValues)try{return a.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof a.randomBytes)try{return a.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function e(){}return function(t){var s;return e.prototype=t,s=new e,e.prototype=null,s}}(),i={},o=i.lib={},c=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=c.extend({init:function(e,s){e=this.words=e||[],t!=s?this.sigBytes=s:this.sigBytes=4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,s=e.words,a=this.sigBytes,r=e.sigBytes;if(this.clamp(),a%4)for(var n=0;n<r;n++){var i=s[n>>>2]>>>24-n%4*8&255;t[a+n>>>2]|=i<<24-(a+n)%4*8}else for(var o=0;o<r;o+=4)t[a+o>>>2]=s[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,s=this.sigBytes;t[s>>>2]&=0xffffffff<<32-s%4*8,t.length=e.ceil(s/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],s=0;s<e;s+=4)t.push(r());return new l.init(t,e)}}),u=i.enc={},f=u.Hex={stringify:function(e){for(var t=e.words,s=e.sigBytes,a=[],r=0;r<s;r++){var n=t[r>>>2]>>>24-r%4*8&255;a.push((n>>>4).toString(16)),a.push((15&n).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,s=[],a=0;a<t;a+=2)s[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new l.init(s,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,s=e.sigBytes,a=[],r=0;r<s;r++){var n=t[r>>>2]>>>24-r%4*8&255;a.push(String.fromCharCode(n))}return a.join("")},parse:function(e){for(var t=e.length,s=[],a=0;a<t;a++)s[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new l.init(s,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var s,a=this._data,r=a.words,n=a.sigBytes,i=this.blockSize,o=n/(4*i),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*i,u=e.min(4*c,n);if(c){for(var f=0;f<c;f+=i)this._doProcessBlock(r,f);s=r.splice(0,c),a.sigBytes-=u}return new l.init(s,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,s){return new e.init(s).finalize(t)}},_createHmacHelper:function(e){return function(t,s){return new g.HMAC.init(e,s).finalize(t)}}});var g=i.algo={};return i}(Math)},636:function(e,t,s){var a;a=s(21),function(e){for(var t=a.lib,s=t.WordArray,r=t.Hasher,n=a.algo,i=[],o=0;o<64;o++)i[o]=0x100000000*e.abs(e.sin(o+1))|0;var c=n.MD5=r.extend({_doReset:function(){this._hash=new s.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,r=e[a];e[a]=(r<<8|r>>>24)&0xff00ff|(r<<24|r>>>8)&0xff00ff00}var n=this._hash.words,o=e[t+0],c=e[t+1],h=e[t+2],p=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],b=e[t+7],w=e[t+8],v=e[t+9],S=e[t+10],$=e[t+11],x=e[t+12],k=e[t+13],A=e[t+14],B=e[t+15],C=n[0],E=n[1],T=n[2],N=n[3];C=l(C,E,T,N,o,7,i[0]),N=l(N,C,E,T,c,12,i[1]),T=l(T,N,C,E,h,17,i[2]),E=l(E,T,N,C,p,22,i[3]),C=l(C,E,T,N,g,7,i[4]),N=l(N,C,E,T,y,12,i[5]),T=l(T,N,C,E,m,17,i[6]),E=l(E,T,N,C,b,22,i[7]),C=l(C,E,T,N,w,7,i[8]),N=l(N,C,E,T,v,12,i[9]),T=l(T,N,C,E,S,17,i[10]),E=l(E,T,N,C,$,22,i[11]),C=l(C,E,T,N,x,7,i[12]),N=l(N,C,E,T,k,12,i[13]),T=l(T,N,C,E,A,17,i[14]),E=l(E,T,N,C,B,22,i[15]),C=u(C,E,T,N,c,5,i[16]),N=u(N,C,E,T,m,9,i[17]),T=u(T,N,C,E,$,14,i[18]),E=u(E,T,N,C,o,20,i[19]),C=u(C,E,T,N,y,5,i[20]),N=u(N,C,E,T,S,9,i[21]),T=u(T,N,C,E,B,14,i[22]),E=u(E,T,N,C,g,20,i[23]),C=u(C,E,T,N,v,5,i[24]),N=u(N,C,E,T,A,9,i[25]),T=u(T,N,C,E,p,14,i[26]),E=u(E,T,N,C,w,20,i[27]),C=u(C,E,T,N,k,5,i[28]),N=u(N,C,E,T,h,9,i[29]),T=u(T,N,C,E,b,14,i[30]),E=u(E,T,N,C,x,20,i[31]),C=f(C,E,T,N,y,4,i[32]),N=f(N,C,E,T,w,11,i[33]),T=f(T,N,C,E,$,16,i[34]),E=f(E,T,N,C,A,23,i[35]),C=f(C,E,T,N,c,4,i[36]),N=f(N,C,E,T,g,11,i[37]),T=f(T,N,C,E,b,16,i[38]),E=f(E,T,N,C,S,23,i[39]),C=f(C,E,T,N,k,4,i[40]),N=f(N,C,E,T,o,11,i[41]),T=f(T,N,C,E,p,16,i[42]),E=f(E,T,N,C,m,23,i[43]),C=f(C,E,T,N,v,4,i[44]),N=f(N,C,E,T,x,11,i[45]),T=f(T,N,C,E,B,16,i[46]),E=f(E,T,N,C,h,23,i[47]),C=d(C,E,T,N,o,6,i[48]),N=d(N,C,E,T,b,10,i[49]),T=d(T,N,C,E,A,15,i[50]),E=d(E,T,N,C,y,21,i[51]),C=d(C,E,T,N,x,6,i[52]),N=d(N,C,E,T,p,10,i[53]),T=d(T,N,C,E,S,15,i[54]),E=d(E,T,N,C,c,21,i[55]),C=d(C,E,T,N,w,6,i[56]),N=d(N,C,E,T,B,10,i[57]),T=d(T,N,C,E,m,15,i[58]),E=d(E,T,N,C,k,21,i[59]),C=d(C,E,T,N,g,6,i[60]),N=d(N,C,E,T,$,10,i[61]),T=d(T,N,C,E,h,15,i[62]),E=d(E,T,N,C,v,21,i[63]),n[0]=n[0]+C|0,n[1]=n[1]+E|0,n[2]=n[2]+T|0,n[3]=n[3]+N|0},_doFinalize:function(){var t=this._data,s=t.words,a=8*this._nDataBytes,r=8*t.sigBytes;s[r>>>5]|=128<<24-r%32;var n=e.floor(a/0x100000000);s[(r+64>>>9<<4)+15]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00,s[(r+64>>>9<<4)+14]=(a<<8|a>>>24)&0xff00ff|(a<<24|a>>>8)&0xff00ff00,t.sigBytes=(s.length+1)*4,this._process();for(var i=this._hash,o=i.words,c=0;c<4;c++){var l=o[c];o[c]=(l<<8|l>>>24)&0xff00ff|(l<<24|l>>>8)&0xff00ff00}return i},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,s,a,r,n,i){var o=e+(t&s|~t&a)+r+i;return(o<<n|o>>>32-n)+t}function u(e,t,s,a,r,n,i){var o=e+(t&a|s&~a)+r+i;return(o<<n|o>>>32-n)+t}function f(e,t,s,a,r,n,i){var o=e+(t^s^a)+r+i;return(o<<n|o>>>32-n)+t}function d(e,t,s,a,r,n,i){var o=e+(s^(t|~a))+r+i;return(o<<n|o>>>32-n)+t}a.MD5=r._createHelper(c),a.HmacMD5=r._createHmacHelper(c)}(Math),e.exports=a.MD5},656:function(){}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),(()=>{"use strict";let e,t=(()=>{let e=Object.keys(globalThis);switch(!0){case e.includes("$task"):return"Quantumult X";case e.includes("$loon"):return"Loon";case e.includes("$rocket"):return"Shadowrocket";case"undefined"!=typeof module:return"Node.js";case e.includes("Egern"):return"Egern";case e.includes("$environment"):if($environment["surge-version"])return"Surge";if($environment["stash-version"])return"Stash";return;default:return}})();class a{static #e=new Map([]);static #t=[];static #s=new Map([]);static clear=()=>{};static count=(e="default")=>{switch(a.#e.has(e)){case!0:a.#e.set(e,a.#e.get(e)+1);break;case!1:a.#e.set(e,0)}a.log(`${e}: ${a.#e.get(e)}`)};static countReset=(e="default")=>{switch(a.#e.has(e)){case!0:a.#e.set(e,0),a.log(`${e}: ${a.#e.get(e)}`);break;case!1:a.warn(`Counter "${e}" doesn‚Äôt exist`)}};static debug=(...e)=>{a.#a<4||(e=e.map(e=>`üÖ±Ô∏è ${e}`),a.log(...e))};static error(...e){if(!(a.#a<1)){switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:e=e.map(e=>`‚ùå ${e}`);break;case"Node.js":e=e.map(e=>`‚ùå ${e.stack}`)}a.log(...e)}}static exception=(...e)=>a.error(...e);static group=e=>a.#t.unshift(e);static groupEnd=()=>a.#t.shift();static info(...e){a.#a<3||(e=e.map(e=>`‚ÑπÔ∏è ${e}`),a.log(...e))}static #a=3;static get logLevel(){switch(a.#a){case 0:return"OFF";case 1:return"ERROR";case 2:return"WARN";case 3:default:return"INFO";case 4:return"DEBUG";case 5:return"ALL"}}static set logLevel(e){switch(typeof e){case"string":e=e.toLowerCase();break;case"number":break;default:e="warn"}switch(e){case 0:case"off":a.#a=0;break;case 1:case"error":a.#a=1;break;case 2:case"warn":case"warning":default:a.#a=2;break;case 3:case"info":a.#a=3;break;case 4:case"debug":a.#a=4;break;case 5:case"all":a.#a=5}}static log=(...e)=>{0!==a.#a&&(e=e.map(e=>{switch(typeof e){case"object":e=JSON.stringify(e);break;case"bigint":case"number":case"boolean":case"string":e=e.toString()}return e}),a.#t.forEach(t=>{(e=e.map(e=>`  ${e}`)).unshift(`‚ñº ${t}:`)}),console.log((e=["",...e]).join("\n")))};static time=(e="default")=>a.#s.set(e,Date.now());static timeEnd=(e="default")=>a.#s.delete(e);static timeLog=(e="default")=>{let t=a.#s.get(e);t?a.log(`${e}: ${Date.now()-t}ms`):a.warn(`Timer "${e}" doesn‚Äôt exist`)};static warn(...e){a.#a<2||(e=e.map(e=>`‚ö†Ô∏è ${e}`),a.log(...e))}}class r{static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static get(e={},t="",s){Array.isArray(t)||(t=r.toPath(t));let a=t.reduce((e,t)=>Object(e)[t],e);return void 0===a?s:a}static omit(e={},t=[]){return Array.isArray(t)||(t=[t.toString()]),t.forEach(t=>r.unset(e,t)),e}static pick(e={},t=[]){return Array.isArray(t)||(t=[t.toString()]),Object.fromEntries(Object.entries(e).filter(([e,s])=>t.includes(e)))}static set(e,t,s){return Array.isArray(t)||(t=r.toPath(t)),t.slice(0,-1).reduce((e,s,a)=>Object(e[s])===e[s]?e[s]:e[s]=/^\d+$/.test(t[a+1])?[]:{},e)[t[t.length-1]]=s,e}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}static unset(e={},t=""){return Array.isArray(t)||(t=r.toPath(t)),t.reduce((e,s,a)=>a===t.length-1?(delete e[s],!0):Object(e)[s],e)}}let n={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Content Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function i(e={}){switch(t){case"Surge":e.policy&&r.set(e,"headers.X-Surge-Policy",e.policy),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${new Date().getTime()/1e3-$script.startTime} Áßí`),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${(new Date-$script.startTime)/1e3} Áßí`),$done(e);break;case"Stash":e.policy&&r.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!",`üïõ ${(new Date-$script.startTime)/1e3} Áßí`),$done(e);break;case"Egern":case"Shadowrocket":a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),$done(e);break;case"Quantumult X":switch(e.policy&&r.set(e,"opts.policy",e.policy),typeof(e=r.pick(e,["status","url","headers","body","bodyBytes"])).status){case"number":e.status=`HTTP/1.1 ${e.status} ${n[e.status]}`;break;case"string":case"undefined":break;default:throw TypeError(`${Function.name}: ÂèÇÊï∞Á±ªÂûãÈîôËØØ, status ÂøÖÈ°ª‰∏∫Êï∞Â≠óÊàñÂ≠óÁ¨¶‰∏≤`)}e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,e.body=void 0):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),e.body=void 0):e.body&&(e.bodyBytes=void 0),a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),$done(e);break;default:a.log("\uD83D\uDEA9 ÊâßË°åÁªìÊùü!"),process.exit(1)}}class o{static data=null;static dataFile="box.dat";static #r=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e,s=null){let a=s;if(!0===e.startsWith("@")){let{key:t,path:s}=e.match(o.#r)?.groups;e=t;let n=o.getItem(e,{});"object"!=typeof n&&(n={}),a=r.get(n,s);try{a=JSON.parse(a)}catch(e){}}else{switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":a=$persistentStore.read(e);break;case"Quantumult X":a=$prefs.valueForKey(e);break;case"Node.js":o.data=o.#n(o.dataFile),a=o.data?.[e];break;default:a=o.data?.[e]||null}try{a=JSON.parse(a)}catch(e){}}return a??s}static setItem(e=new String,s=new String){let a=!1;if(s="object"==typeof s?JSON.stringify(s):String(s),!0===e.startsWith("@")){let{key:t,path:n}=e.match(o.#r)?.groups;e=t;let i=o.getItem(e,{});"object"!=typeof i&&(i={}),r.set(i,n,s),a=o.setItem(e,i)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":a=$persistentStore.write(s,e);break;case"Quantumult X":a=$prefs.setValueForKey(s,e);break;case"Node.js":o.data=o.#n(o.dataFile),o.data[e]=s,o.#i(o.dataFile),a=!0;break;default:a=o.data?.[e]||null}return a}static removeItem(e){let s=!1;if(!0===e.startsWith("@")){let{key:t,path:a}=e.match(o.#r)?.groups;e=t;let n=o.getItem(e);"object"!=typeof n&&(n={}),keyValue=r.unset(n,a),s=o.setItem(e,n)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:s=!1;break;case"Quantumult X":s=$prefs.removeValueForKey(e)}return s}static clear(){let e=!1;switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:e=!1;break;case"Quantumult X":e=$prefs.removeAllValues()}return e}static #n=e=>{if("Node.js"!==t)return{};{this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s);if(!a&&!r)return{};try{return JSON.parse(this.fs.readFileSync(a?t:s))}catch(e){return{}}}};static #i=(e=this.dataFile)=>{if("Node.js"===t){this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s),n=JSON.stringify(this.data);a?this.fs.writeFileSync(t,n):r?this.fs.writeFileSync(s,n):this.fs.writeFileSync(t,n)}}}function c(e){return/^\d+$/.test(e)&&(e=Number.parseInt(e,10)),e}let l={ADBlock:{Settings:{Splash:!0,Feed:{AD:!0,Activity:!1,Vertical:!1,BlockUpLiveList:"",Story:!0},Search:{AD:!0,HotSearch:!0},PGC:{AD:!0},Xlive:{AD:!0},Dynamic:{HotTopics:!0,MostVisited:!1,AdCard:!0},View:{AD:!0},DM:{Command:!1,Colorful:!1},Reply:{AD:!0}}},Default:{Settings:{LogLevel:"WARN"}}};var u=s(636);let f=new URL($request.url);a.info(`url: ${f.toJSON()}`);let d=f.pathname.split("/").filter(Boolean);a.info(`PATHs: ${d}`);let h=($request.headers?.["Content-Type"]??$request.headers?.["content-type"])?.split(";")?.[0];a.info(`FORMAT: ${h}`),(async()=>{let{Settings:e,Caches:t,Configs:s}=function(e,t,s){a.log("‚òëÔ∏è Set Environment Variables");let{Settings:n,Caches:i,Configs:l}=function(e,t,s){t=[t].flat(1/0);let a={Settings:s?.Default?.Settings||{},Configs:s?.Default?.Configs||{},Caches:{}};switch(t.forEach(e=>{a.Settings={...a.Settings,...s?.[e]?.Settings},a.Configs={...a.Configs,...s?.[e]?.Configs}}),typeof $argument){case"string":$argument=Object.fromEntries($argument.split("&").map(e=>e.split("=",2).map(e=>e.replace(/\"/g,""))));case"object":{let e={};Object.keys($argument).forEach(t=>r.set(e,t,$argument[t])),a.Settings={...a.Settings,...e}}}let n=o.getItem(e);return n&&t.forEach(e=>{switch(typeof n?.[e]?.Settings){case"string":n[e].Settings=JSON.parse(n[e].Settings||"{}");case"object":a.Settings={...a.Settings,...n[e].Settings}}switch(typeof n?.[e]?.Caches){case"string":n[e].Caches=JSON.parse(n[e].Caches||"{}");case"object":a.Caches={...a.Caches,...n[e].Caches}}}),function e(t,s){for(let a in t){let r=t[a];t[a]="object"==typeof r&&null!==r?e(r,s):s(a,r)}return t}(a.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>c(e)):c(t)),t)),a}(e,t,s);return a.info(`typeof Settings: ${typeof n}`,`Settings: ${JSON.stringify(n,null,2)}`),a.log("‚úÖ Set Environment Variables"),{Settings:n,Caches:i,Configs:l}}("BiliBili","ADBlock",l);switch(a.logLevel=e.LogLevel,$request.method){case"POST":case"PUT":case"PATCH":case"DELETE":case"GET":case"HEAD":case"OPTIONS":default:switch(f.hostname){case"www.bilibili.com":case"search.bilibili.com":break;case"app.bilibili.com":case"app.biliapi.net":switch(f.pathname){case"/x/v2/splash/show":case"/x/v2/splash/list":case"/x/v2/splash/brand/list":case"/x/v2/splash/event/list2":case"/x/v2/feed/index/story":case"/x/v2/search/square":case"/x/v2/search":case"/x/v2/search/type":break;case"/x/v2/feed/index":switch(e?.Feed?.Activity){case!0:default:if(f.searchParams.has("banner_hash")&&"0"!==f.searchParams.get("login_event")){f.searchParams.delete("sign"),f.searchParams.set("open_event",""),f.searchParams.set("pull",0),t.banner_hash&&(f.searchParams.set("banner_hash",t.banner_hash),a.log("‚úÖ ËØªÂèñhashÁºìÂ≠òÊàêÂäü"));let e=u(`${f.search.substring(1)}c2ed53a74eeefe3cf99fbd01d8c9c375`).toString();f.searchParams.set("sign",e)}break;case!1:a.warn("Áî®Êà∑ËÆæÁΩÆÊé®ËçêÈ°µÊ¥ªÂä®Â§ßÂõæ‰∏çÂéªÈô§")}}break;case"api.bilibili.com":case"api.biliapi.net":case"api.live.bilibili.com":f.pathname}case"CONNECT":case"TRACE":}$request.url=f.toString(),a.debug(`$request.url: ${$request.url}`)})().catch(e=>a.error(e)).finally(()=>{switch(typeof e){case"object":e.headers?.["Content-Encoding"]&&(e.headers["Content-Encoding"]="identity"),e.headers?.["content-encoding"]&&(e.headers["content-encoding"]="identity"),"Quantumult X"===t?(e.status||(e.status="HTTP/1.1 200 OK"),delete e.headers?.["Content-Length"],delete e.headers?.["content-length"],delete e.headers?.["Transfer-Encoding"],i(e)):i({response:e});break;case"undefined":i($request);break;default:a.error(`‰∏çÂêàÊ≥ïÁöÑ $response Á±ªÂûã: ${typeof e}`)}})})()})();