console.log("\uD83D\uDCFA BiliBili: \uD83D\uDEE1ï¸ ADBlock"),console.log("request.bundle.js"),console.log("Version: 0.6.24"),console.log("Date: 2026/2/1 13:54:05"),(()=>{var e={21(e,t,s){var r;e.exports=r||function(e,t){if("u">typeof window&&window.crypto&&(r=window.crypto),"u">typeof self&&self.crypto&&(r=self.crypto),"u">typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"u">typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==s.g&&s.g.crypto&&(r=s.g.crypto),!r)try{r=s(298)}catch(e){}var r,a=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var s;return e.prototype=t,s=new e,e.prototype=null,s}}(),n={},o=n.lib={},c=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=c.extend({init:function(e,s){e=this.words=e||[],t!=s?this.sigBytes=s:this.sigBytes=4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,s=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<a;i++){var n=s[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=n<<24-(r+i)%4*8}else for(var o=0;o<a;o+=4)t[r+o>>>2]=s[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,s=this.sigBytes;t[s>>>2]&=0xffffffff<<32-s%4*8,t.length=e.ceil(s/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],s=0;s<e;s+=4)t.push(a());return new l.init(t,e)}}),u=n.enc={},f=u.Hex={stringify:function(e){for(var t=e.words,s=e.sigBytes,r=[],a=0;a<s;a++){var i=t[a>>>2]>>>24-a%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,s=[],r=0;r<t;r+=2)s[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(s,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,s=e.sigBytes,r=[],a=0;a<s;a++){var i=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,s=[],r=0;r<t;r++)s[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(s,t)}},g=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=g.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var s,r=this._data,a=r.words,i=r.sigBytes,n=this.blockSize,o=i/(4*n),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,u=e.min(4*c,i);if(c){for(var f=0;f<c;f+=n)this._doProcessBlock(a,f);s=a.splice(0,c),r.sigBytes-=u}return new l.init(s,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,s){return new e.init(s).finalize(t)}},_createHmacHelper:function(e){return function(t,s){return new p.HMAC.init(e,s).finalize(t)}}});var p=n.algo={};return n}(Math)},636(e,t,s){var r;r=s(21),function(e){for(var t=r.lib,s=t.WordArray,a=t.Hasher,i=r.algo,n=[],o=0;o<64;o++)n[o]=0x100000000*e.abs(e.sin(o+1))|0;var c=i.MD5=a.extend({_doReset:function(){this._hash=new s.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var r=t+s,a=e[r];e[r]=(a<<8|a>>>24)&0xff00ff|(a<<24|a>>>8)&0xff00ff00}var i=this._hash.words,o=e[t+0],c=e[t+1],g=e[t+2],h=e[t+3],p=e[t+4],y=e[t+5],b=e[t+6],m=e[t+7],S=e[t+8],v=e[t+9],w=e[t+10],$=e[t+11],x=e[t+12],k=e[t+13],L=e[t+14],O=e[t+15],A=i[0],B=i[1],N=i[2],E=i[3];A=l(A,B,N,E,o,7,n[0]),E=l(E,A,B,N,c,12,n[1]),N=l(N,E,A,B,g,17,n[2]),B=l(B,N,E,A,h,22,n[3]),A=l(A,B,N,E,p,7,n[4]),E=l(E,A,B,N,y,12,n[5]),N=l(N,E,A,B,b,17,n[6]),B=l(B,N,E,A,m,22,n[7]),A=l(A,B,N,E,S,7,n[8]),E=l(E,A,B,N,v,12,n[9]),N=l(N,E,A,B,w,17,n[10]),B=l(B,N,E,A,$,22,n[11]),A=l(A,B,N,E,x,7,n[12]),E=l(E,A,B,N,k,12,n[13]),N=l(N,E,A,B,L,17,n[14]),B=l(B,N,E,A,O,22,n[15]),A=u(A,B,N,E,c,5,n[16]),E=u(E,A,B,N,b,9,n[17]),N=u(N,E,A,B,$,14,n[18]),B=u(B,N,E,A,o,20,n[19]),A=u(A,B,N,E,y,5,n[20]),E=u(E,A,B,N,w,9,n[21]),N=u(N,E,A,B,O,14,n[22]),B=u(B,N,E,A,p,20,n[23]),A=u(A,B,N,E,v,5,n[24]),E=u(E,A,B,N,L,9,n[25]),N=u(N,E,A,B,h,14,n[26]),B=u(B,N,E,A,S,20,n[27]),A=u(A,B,N,E,k,5,n[28]),E=u(E,A,B,N,g,9,n[29]),N=u(N,E,A,B,m,14,n[30]),B=u(B,N,E,A,x,20,n[31]),A=f(A,B,N,E,y,4,n[32]),E=f(E,A,B,N,S,11,n[33]),N=f(N,E,A,B,$,16,n[34]),B=f(B,N,E,A,L,23,n[35]),A=f(A,B,N,E,c,4,n[36]),E=f(E,A,B,N,p,11,n[37]),N=f(N,E,A,B,m,16,n[38]),B=f(B,N,E,A,w,23,n[39]),A=f(A,B,N,E,k,4,n[40]),E=f(E,A,B,N,o,11,n[41]),N=f(N,E,A,B,h,16,n[42]),B=f(B,N,E,A,b,23,n[43]),A=f(A,B,N,E,v,4,n[44]),E=f(E,A,B,N,x,11,n[45]),N=f(N,E,A,B,O,16,n[46]),B=f(B,N,E,A,g,23,n[47]),A=d(A,B,N,E,o,6,n[48]),E=d(E,A,B,N,m,10,n[49]),N=d(N,E,A,B,L,15,n[50]),B=d(B,N,E,A,y,21,n[51]),A=d(A,B,N,E,x,6,n[52]),E=d(E,A,B,N,h,10,n[53]),N=d(N,E,A,B,w,15,n[54]),B=d(B,N,E,A,c,21,n[55]),A=d(A,B,N,E,S,6,n[56]),E=d(E,A,B,N,O,10,n[57]),N=d(N,E,A,B,b,15,n[58]),B=d(B,N,E,A,k,21,n[59]),A=d(A,B,N,E,p,6,n[60]),E=d(E,A,B,N,$,10,n[61]),N=d(N,E,A,B,g,15,n[62]),B=d(B,N,E,A,v,21,n[63]),i[0]=i[0]+A|0,i[1]=i[1]+B|0,i[2]=i[2]+N|0,i[3]=i[3]+E|0},_doFinalize:function(){var t=this._data,s=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;s[a>>>5]|=128<<24-a%32;var i=e.floor(r/0x100000000);s[(a+64>>>9<<4)+15]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,s[(a+64>>>9<<4)+14]=(r<<8|r>>>24)&0xff00ff|(r<<24|r>>>8)&0xff00ff00,t.sigBytes=(s.length+1)*4,this._process();for(var n=this._hash,o=n.words,c=0;c<4;c++){var l=o[c];o[c]=(l<<8|l>>>24)&0xff00ff|(l<<24|l>>>8)&0xff00ff00}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,s,r,a,i,n){var o=e+(t&s|~t&r)+a+n;return(o<<i|o>>>32-i)+t}function u(e,t,s,r,a,i,n){var o=e+(t&r|s&~r)+a+n;return(o<<i|o>>>32-i)+t}function f(e,t,s,r,a,i,n){var o=e+(t^s^r)+a+n;return(o<<i|o>>>32-i)+t}function d(e,t,s,r,a,i,n){var o=e+(s^(t|~r))+a+n;return(o<<i|o>>>32-i)+t}r.MD5=a._createHelper(c),r.HmacMD5=a._createHmacHelper(c)}(Math),e.exports=r.MD5},298(){}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,s),i.exports}s.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),(()=>{"use strict";let e,t=(()=>{let e=Object.keys(globalThis);switch(!0){case e.includes("$task"):return"Quantumult X";case e.includes("$loon"):return"Loon";case e.includes("$rocket"):return"Shadowrocket";case"u">typeof module:return"Node.js";case e.includes("Egern"):return"Egern";case e.includes("$environment"):if($environment["surge-version"])return"Surge";if($environment["stash-version"])return"Stash";return;default:return}})();class r{static #e=new Map([]);static #t=[];static #s=new Map([]);static clear=()=>{};static count=(e="default")=>{switch(r.#e.has(e)){case!0:r.#e.set(e,r.#e.get(e)+1);break;case!1:r.#e.set(e,0)}r.log(`${e}: ${r.#e.get(e)}`)};static countReset=(e="default")=>{switch(r.#e.has(e)){case!0:r.#e.set(e,0),r.log(`${e}: ${r.#e.get(e)}`);break;case!1:r.warn(`Counter "${e}" doesnâ€™t exist`)}};static debug=(...e)=>{r.#r<4||(e=e.map(e=>`ğŸ…±ï¸ ${e}`),r.log(...e))};static error(...e){if(!(r.#r<1)){switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:e=e.map(e=>`âŒ ${e}`);break;case"Node.js":e=e.map(e=>`âŒ ${e.stack}`)}r.log(...e)}}static exception=(...e)=>r.error(...e);static group=e=>r.#t.unshift(e);static groupEnd=()=>r.#t.shift();static info(...e){r.#r<3||(e=e.map(e=>`â„¹ï¸ ${e}`),r.log(...e))}static #r=3;static get logLevel(){switch(r.#r){case 0:return"OFF";case 1:return"ERROR";case 2:return"WARN";case 3:default:return"INFO";case 4:return"DEBUG";case 5:return"ALL"}}static set logLevel(e){switch(typeof e){case"string":e=e.toLowerCase();break;case"number":break;default:e="warn"}switch(e){case 0:case"off":r.#r=0;break;case 1:case"error":r.#r=1;break;case 2:case"warn":case"warning":default:r.#r=2;break;case 3:case"info":r.#r=3;break;case 4:case"debug":r.#r=4;break;case 5:case"all":r.#r=5}}static log=(...e)=>{0!==r.#r&&(e=e.map(e=>{switch(typeof e){case"object":e=JSON.stringify(e);break;case"bigint":case"number":case"boolean":case"string":e=e.toString()}return e}),r.#t.forEach(t=>{(e=e.map(e=>`  ${e}`)).unshift(`â–¼ ${t}:`)}),console.log((e=["",...e]).join("\n")))};static time=(e="default")=>r.#s.set(e,Date.now());static timeEnd=(e="default")=>r.#s.delete(e);static timeLog=(e="default")=>{let t=r.#s.get(e);t?r.log(`${e}: ${Date.now()-t}ms`):r.warn(`Timer "${e}" doesnâ€™t exist`)};static warn(...e){r.#r<2||(e=e.map(e=>`âš ï¸ ${e}`),r.log(...e))}}class a{static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static get(e={},t="",s){Array.isArray(t)||(t=a.toPath(t));let r=t.reduce((e,t)=>Object(e)[t],e);return void 0===r?s:r}static merge(e,...t){if(null==e)return e;for(let s of t)if(null!=s)for(let t of Object.keys(s)){let r=s[t],i=e[t];switch(!0){case a.#a(r)&&a.#a(i):e[t]=a.merge(i,r);break;case r instanceof Map&&i instanceof Map:if(r.size>0)for(let[e,t]of r)i.set(e,t);break;case r instanceof Set&&i instanceof Set:if(r.size>0)for(let e of r)i.add(e);break;case Array.isArray(r)&&0===r.length&&void 0!==i:case r instanceof Map&&0===r.size&&void 0!==i:case r instanceof Set&&0===r.size&&void 0!==i:break;case void 0!==r:e[t]=r}}return e}static #a(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}static omit(e={},t=[]){return Array.isArray(t)||(t=[t.toString()]),t.forEach(t=>a.unset(e,t)),e}static pick(e={},t=[]){return Array.isArray(t)||(t=[t.toString()]),Object.fromEntries(Object.entries(e).filter(([e,s])=>t.includes(e)))}static set(e,t,s){return Array.isArray(t)||(t=a.toPath(t)),t.slice(0,-1).reduce((e,s,r)=>Object(e[s])===e[s]?e[s]:e[s]=/^\d+$/.test(t[r+1])?[]:{},e)[t[t.length-1]]=s,e}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}static unset(e={},t=""){return Array.isArray(t)||(t=a.toPath(t)),t.reduce((e,s,r)=>r===t.length-1?(delete e[s],!0):Object(e)[s],e)}}let i={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Content Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function n(e={}){switch(t){case"Surge":e.policy&&a.set(e,"headers.X-Surge-Policy",e.policy),r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!",`ğŸ•› ${new Date().getTime()/1e3-$script.startTime} ç§’`),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!",`ğŸ•› ${(new Date-$script.startTime)/1e3} ç§’`),$done(e);break;case"Stash":e.policy&&a.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!",`ğŸ•› ${(new Date-$script.startTime)/1e3} ç§’`),$done(e);break;case"Egern":case"Shadowrocket":r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!"),$done(e);break;case"Quantumult X":switch(e.policy&&a.set(e,"opts.policy",e.policy),typeof(e=a.pick(e,["status","url","headers","body","bodyBytes"])).status){case"number":e.status=`HTTP/1.1 ${e.status} ${i[e.status]}`;break;case"string":case"undefined":break;default:throw TypeError(`${Function.name}: å‚æ•°ç±»å‹é”™è¯¯, status å¿…é¡»ä¸ºæ•°å­—æˆ–å­—ç¬¦ä¸²`)}e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,e.body=void 0):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),e.body=void 0):e.body&&(e.bodyBytes=void 0),r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!"),$done(e);break;default:r.log("\uD83D\uDEA9 æ‰§è¡Œç»“æŸ!"),process.exit(1)}}class o{static data=null;static dataFile="box.dat";static #i=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e,s=null){let r=s;if(!0===e.startsWith("@")){let{key:t,path:s}=e.match(o.#i)?.groups;e=t;let i=o.getItem(e,{});"object"!=typeof i&&(i={}),r=a.get(i,s);try{r=JSON.parse(r)}catch(e){}}else{switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":r=$persistentStore.read(e);break;case"Quantumult X":r=$prefs.valueForKey(e);break;case"Node.js":o.data=o.#n(o.dataFile),r=o.data?.[e];break;default:r=o.data?.[e]||null}try{r=JSON.parse(r)}catch(e){}}return r??s}static setItem(e=new String,s=new String){let r=!1;if(s="object"==typeof s?JSON.stringify(s):String(s),!0===e.startsWith("@")){let{key:t,path:i}=e.match(o.#i)?.groups;e=t;let n=o.getItem(e,{});"object"!=typeof n&&(n={}),a.set(n,i,s),r=o.setItem(e,n)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":r=$persistentStore.write(s,e);break;case"Quantumult X":r=$prefs.setValueForKey(s,e);break;case"Node.js":o.data=o.#n(o.dataFile),o.data[e]=s,o.#o(o.dataFile),r=!0;break;default:r=o.data?.[e]||null}return r}static removeItem(e){let s=!1;if(!0===e.startsWith("@")){let{key:t,path:r}=e.match(o.#i)?.groups;e=t;let i=o.getItem(e);"object"!=typeof i&&(i={}),keyValue=a.unset(i,r),s=o.setItem(e,i)}else switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:s=!1;break;case"Quantumult X":s=$prefs.removeValueForKey(e)}return s}static clear(){let e=!1;switch(t){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":default:e=!1;break;case"Quantumult X":e=$prefs.removeAllValues()}return e}static #n=e=>{if("Node.js"!==t)return{};{this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),a=!r&&this.fs.existsSync(s);if(!r&&!a)return{};try{return JSON.parse(this.fs.readFileSync(r?t:s))}catch(e){return{}}}};static #o=(e=this.dataFile)=>{if("Node.js"===t){this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),a=!r&&this.fs.existsSync(s),i=JSON.stringify(this.data);r?this.fs.writeFileSync(t,i):a?this.fs.writeFileSync(s,i):this.fs.writeFileSync(t,i)}}}function c(e){return/^\d+$/.test(e)&&(e=Number.parseInt(e,10)),e}let l={ADBlock:{Settings:{Splash:!0,Feed:{AD:!0,Activity:!1,Vertical:!1,BlockUpLiveList:"",Story:!0},Search:{AD:!0,HotSearch:!0},PGC:{AD:!0},Xlive:{AD:!0},Dynamic:{HotTopics:!0,MostVisited:!1,MostVisitedLiveOnly:!1,AdCard:!0},View:{AD:!0},DM:{Command:!1,Colorful:!1},Reply:{AD:!0}}},Default:{Settings:{LogLevel:"WARN"}}};var u=s(636);let f=new URL($request.url);r.info(`url: ${f.toJSON()}`);let d=f.pathname.split("/").filter(Boolean);r.info(`PATHs: ${d}`);let g=($request.headers?.["Content-Type"]??$request.headers?.["content-type"])?.split(";")?.[0];r.info(`FORMAT: ${g}`),(async()=>{let{Settings:e,Caches:t,Configs:s}=function(e,t,s){r.log("â˜‘ï¸ Set Environment Variables");let{Settings:i,Caches:n,Configs:l}=function(e,t,s){s?.Default?.Settings?.LogLevel&&(r.logLevel=s.Default.Settings.LogLevel),r.debug("â˜‘ï¸ getStorage"),t=[t].flat(1/0);let i={Settings:s?.Default?.Settings||{},Configs:s?.Default?.Configs||{},Caches:{}};r.debug("Default",`Store.Settingsç±»å‹: ${typeof i.Settings}`,`Store.Settings: ${JSON.stringify(i.Settings)}`),r.debug("â˜‘ï¸ $argument");let n={};switch(typeof $argument){case"string":$argument=Object.fromEntries($argument.split("&").map(e=>e.split("=",2).map(e=>e.replace(/\"/g,""))));case"object":Object.keys($argument).forEach(e=>a.set(n,e,$argument[e]))}n.LogLevel&&(r.logLevel=n.LogLevel),r.debug("âœ… $argument",`argument: ${JSON.stringify(n)}`);let l=o.getItem(e);return l&&(r.debug("â˜‘ï¸ BoxJs",`BoxJsç±»å‹: ${typeof l}`,`BoxJså†…å®¹: ${JSON.stringify(l||{})}`),t.forEach(e=>{"string"==typeof l?.[e]?.Settings&&(l[e].Settings=JSON.parse(l[e].Settings||"{}")),"string"==typeof l?.[e]?.Caches&&(l[e].Caches=JSON.parse(l[e].Caches||"{}"))}),l.LogLevel&&(r.logLevel=l.LogLevel),r.debug("âœ… BoxJs",`Store.Settingsç±»å‹: ${typeof i.Settings}`,`Store.Settings: ${JSON.stringify(i.Settings)}`)),t.forEach(e=>{a.merge(i.Settings,s?.[e]?.Settings,l?.[e]?.Settings),a.merge(i.Configs,s?.[e]?.Configs),a.merge(i.Caches,l?.[e]?.Caches)}),a.merge(i.Settings,n),i.Settings.LogLevel&&(r.logLevel=i.Settings.LogLevel),r.debug("âœ… Merge",`Store.Settingsç±»å‹: ${typeof i.Settings}`,`Store.Settings: ${JSON.stringify(i.Settings)}`),function e(t,s){for(let r in t){let a=t[r];t[r]="object"==typeof a&&null!==a?e(a,s):s(r,a)}return t}(i.Settings,(e,t)=>(r.debug("â˜‘ï¸ traverseObject",`${e}: ${typeof t}`,`${e}: ${JSON.stringify(t)}`),"true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>c(e)):c(t)),t)),r.debug("âœ… traverseObject",`Store.Settingsç±»å‹: ${typeof i.Settings}`,`Store.Settings: ${JSON.stringify(i.Settings)}`),r.debug("âœ… getStorage"),i}(e,t,s);return r.info(`typeof Settings: ${typeof i}`,`Settings: ${JSON.stringify(i,null,2)}`),r.log("âœ… Set Environment Variables"),{Settings:i,Caches:n,Configs:l}}("BiliBili","ADBlock",l);switch(r.logLevel=e.LogLevel,$request.method){case"POST":case"PUT":case"PATCH":case"DELETE":case"GET":case"HEAD":case"OPTIONS":default:switch(f.hostname){case"www.bilibili.com":case"search.bilibili.com":break;case"app.bilibili.com":case"app.biliapi.net":switch(f.pathname){case"/x/v2/splash/show":case"/x/v2/splash/list":case"/x/v2/splash/brand/list":case"/x/v2/splash/event/list2":case"/x/v2/feed/index/story":case"/x/v2/search/square":case"/x/v2/search":case"/x/v2/search/type":break;case"/x/v2/feed/index":switch(e?.Feed?.Activity){case!0:default:if(f.searchParams.has("banner_hash")&&"0"!==f.searchParams.get("login_event")){f.searchParams.delete("sign"),f.searchParams.set("open_event",""),f.searchParams.set("pull",0),t.banner_hash&&(f.searchParams.set("banner_hash",t.banner_hash),r.log("âœ… è¯»å–hashç¼“å­˜æˆåŠŸ"));let e=u(`${f.search.substring(1)}c2ed53a74eeefe3cf99fbd01d8c9c375`).toString();f.searchParams.set("sign",e)}break;case!1:r.warn("ç”¨æˆ·è®¾ç½®æ¨èé¡µæ´»åŠ¨å¤§å›¾ä¸å»é™¤")}}break;case"api.bilibili.com":case"api.biliapi.net":case"api.live.bilibili.com":f.pathname}case"CONNECT":case"TRACE":}$request.url=f.toString(),r.debug(`$request.url: ${$request.url}`)})().catch(e=>r.error(e)).finally(()=>{switch(typeof e){case"object":e.headers?.["Content-Encoding"]&&(e.headers["Content-Encoding"]="identity"),e.headers?.["content-encoding"]&&(e.headers["content-encoding"]="identity"),"Quantumult X"===t?(e.status||(e.status="HTTP/1.1 200 OK"),delete e.headers?.["Content-Length"],delete e.headers?.["content-length"],delete e.headers?.["Transfer-Encoding"],n(e)):n({response:e});break;case"undefined":n($request);break;default:r.error(`ä¸åˆæ³•çš„ $response ç±»å‹: ${typeof e}`)}})})()})();